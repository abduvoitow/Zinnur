{% extends 'base.html' %}
{% block content %}
   
  <div class="container">
    <div class="row">

      <div class="col-lg-8">
        <!-- Blog Posts Section -->
        <section id="blog-posts" class="blog-posts section">

          <div class="container section-title" data-aos="fade-up">
            <h2>Yangiliklar</h2>
          </div>

          <div class="container" data-aos="fade-up" data-aos-delay="200">

            <div class="row gy-4">
              {% for item in news %}
              <div class="col-lg-6">
                <article>

                  <div class="post-img">
                    {% if item.image %}
                    <img src="{{ item.image.url }}" alt="{{ item.title }}" class="img-fluid">
                    {% endif %}
                  </div>

                  <h2 class="title">
                    <a href="{% url 'news:news_detail' item.pk %}">{{ item.title }}</a>
                  </h2>

                  <div class="meta-top">
                    <ul>
                      <li class="d-flex align-items-center"><i class="bi bi-clock"></i> {{ item.created_at|date:"d-m-Y H:i" }}</li>
                    </ul>
                  </div>

                  <div class="content">
                    <p>{{ item.content|truncatechars:150 }}</p>

                    <div class="read-more">
                      <a href="{% url 'news:news_detail' item.pk %}">Batafsil</a>
                    </div>
                  </div>

                </article>
              </div><!-- End post list item -->
              {% empty %}
              <div class="col-12 text-center text-muted">Yangiliklar topilmadi.</div>
              {% endfor %}

            

          </div>

        </section><!-- /Blog Posts Section -->


      </div>

      <div class="col-lg-4 sidebar">

        <div class="widgets-container" data-aos="fade-up" data-aos-delay="200">

          <!-- Search -->
          <div class="search-widget widget-item">
            <h3 class="widget-title">Qidirish</h3>
            <form method="get" action="">
              <input type="text" name="q" value="{{ search_query|default:'' }}" placeholder="Yangilik qidirish...">
              <button type="submit" title="Search"><i class="bi bi-search"></i></button>
            </form>
          </div><!--/Search  -->

  <!-- So'ngi yangiliklar -->
  <div class="recent-posts-widget widget-item">
    <h3 class="widget-title">So'ngi yangiliklar</h3>
    {% if search_query %}
      <div class="mb-2" style="font-size:0.95rem;color:#007bff;">Qidiruv natijalari: <b>{{ search_query }}</b></div>
    {% endif %}
    {% for item in latest_news %}
    <div class="post-item mb-3">
      <h4 class="mb-1"><a href="{% url 'news:news_detail' item.pk %}">{{ item.title|truncatechars:50 }}</a></h4>
      <p class="mb-1" style="font-size: 0.9rem; color: #666;">{{ item.content|truncatechars:100 }}</p>
      <time datetime="{{ item.created_at|date:'Y-m-d' }}" style="font-size: 0.8rem; color: #aaa;">{{ item.created_at|date:'d-m-Y' }}</time>
    </div>
    {% empty %}
    <div class="post-item">Natijalar topilmadi.</div>
    {% endfor %}
  </div><!-- So'ngi yangiliklar -->


        </div>

      </div>

    </div>
  </div>

  {% if is_paginated %}
  <section id="blog-pagination" class="blog-pagination section">
    <div class="container">
      <div class="d-flex justify-content-center">
        <ul class="pagination pagination-lg">
          {% if page_obj.has_previous %}
            <li><a href="?page={{ page_obj.previous_page_number }}"><i class="bi bi-chevron-left"></i></a></li>
          {% else %}
          <li><a href="#"><i class="bi bi-chevron-left"></i></a></li>
          {% endif %}
          {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
              <li><a href="?page={{ num }}" class="active">{{ num }}</a></li>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
              <li><a href="?page={{ num }}">{{ num }}</a></li>
            {% elif num == 1 or num == page_obj.paginator.num_pages %}
              <li><a href="?page={{ num }}">{{ num }}</a></li>
            {% elif num == page_obj.number|add:'-3' or num == page_obj.number|add:'3' %}
              <li><span>...</span></li>
            {% endif %}
          {% endfor %}
          {% if page_obj.has_next %}
            <li><a href="?page={{ page_obj.next_page_number }}"><i class="bi bi-chevron-right"></i></a></li>
          {% else %}
          <li><a href="#"><i class="bi bi-chevron-right"></i></a></li>
          {% endif %}
        </ul>
      </div>
    </div>
  </section>
  {% endif %}
</div>
</section><!-- /Blog Posts 2 Section -->



       

{% endblock %}




