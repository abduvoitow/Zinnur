{% extends 'base.html' %}
{% load humanize %}
{% block content %}
{% load widget_tweaks %}
<div class="container py-4 contact section">
  <div class="row justify-content-center">
    <div class="col-lg-7 col-md-9">
      <div class="card border-0 shadow-sm mb-4">
        <div class="card-body p-4">
          <div class="d-flex align-items-center mb-3 gap-3 flex-wrap">
            <img width="110" src="{{ product.image.url }}" alt="{{ product.name }}" class="img-thumbnail" style="object-fit:cover;">
            <div>
              <h3 class="fw-bold mb-1" style="color: var(--heading-color);">{{ product.name }}</h3>
              <span class="badge bg-warning text-dark fs-6">{{ product.price|floatformat:0|intcomma }} so'm</span>
            </div>
          </div>
          <div class="mb-3 text-muted" style="font-size:1.05em;">{{ product.description|linebreaks }}</div>
          <hr>
          <h5 class="mb-3" style="color: var(--heading-color);">Sotib olish uchun ma'lumotlar</h5>
          <form method="post" class="contact-form">
            {% csrf_token %}
            <div class="form-group mt-3">
              <label for="{{ form.full_name.id_for_label }}" class="form-label">Ism Familiya</label>
              {{ form.full_name|add_class:'form-control' }}
            </div>
            <div class="form-group mt-3">
              <label for="phone_number" class="form-label">Telefon raqam</label>
              <div class="input-group">
                <span class="input-group-text">+998</span>
                <input type="text" class="form-control" id="phone_number" name="phone_number" required oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0,9)">
              </div>
            </div>
            <div class="mt-3">
              <label for="id_quantity" class="form-label">Soni</label>
              <div class="d-flex align-items-center gap-2" style="max-width: 200px;">
                <button type="button" class="btn btn-light border rounded-circle p-0 d-flex align-items-center justify-content-center" id="decrement-btn" style="width: 35px; height: 35px; font-size: 1rem;">
                  <span class="bi bi-dash"></span>
                </button>
                <input type="number" name="quantity" min="1" value="1" class="form-control text-center border-0" id="id_quantity" style="width: 90px; min-width: 0; background: #f8f9fa;" readonly>
                <button type="button" class="btn btn-light border rounded-circle p-0 d-flex align-items-center justify-content-center" id="increment-btn" style="width: 35px; height: 35px; font-size: 1rem;">
                  <span class="bi bi-plus"></span>
                </button>
              </div>
            </div>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
            <script>
              document.addEventListener('DOMContentLoaded', function() {
                const input = document.getElementById('id_quantity');
                document.getElementById('increment-btn').onclick = function() {
                  input.value = parseInt(input.value) + 1;
                };
                document.getElementById('decrement-btn').onclick = function() {
                  if (parseInt(input.value) > 1) {
                    input.value = parseInt(input.value) - 1;
                  }
                };
              });
            </script>
            <div class="text-center mt-4">
              <button type="submit" class="btn btn-get-started px-5">Xarid qilish</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
