{% extends 'base.html' %}
{% block content %}
{% load humanize %}
{% if messages %}
  <div class="toast-container position-fixed start-50 translate-middle-x" style="top: 70px; z-index: 1080;">
    {% for message in messages %}
      <div class="toast align-items-center show border-0 shadow-lg mb-3" role="alert" aria-live="assertive" aria-atomic="true"
           style="min-width:320px; max-width:90vw; background:rgba(255,255,255,0.85); backdrop-filter:blur(6px); border-radius:1.2rem;">
        <div class="d-flex align-items-center px-3 py-2">
          <i class="bi bi-check-circle-fill text-success fs-3 me-3"></i>
          <div class="flex-grow-1 fs-6" style="color:#222;">{{ message }}</div>
          <button type="button" class="btn-close ms-3" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
      </div>
    {% endfor %}
  </div>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <script>
    // Avtomatik yopilish (3 sekunddan soâ€˜ng)
    setTimeout(function() {
      document.querySelectorAll('.toast').forEach(function(toast) {
        if (toast.classList.contains('show')) {
          var bsToast = bootstrap.Toast.getOrCreateInstance(toast);
          bsToast.hide();
        }
      });
    }, 3000);
  </script>
{% endif %}

    <!-- portfolio Section -->
    <section id="portfolio" class="portfolio section">
      
      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <h2>Mahsulotlar</h2>
      </div><!-- End Section Title -->

      <div class="container">

        <div class="isotope-layout" data-default-filter="*" data-layout="masonry" data-sort="original-order">

          <ul class="portfolio-filters isotope-filters" data-aos="fade-up" data-aos-delay="100">
            <li data-filter="*" class="filter-active">Hammasi</li>
            <li data-filter=".filter-app">Bo'yoq va laklar</li>
            <li data-filter=".filter-product">Mebellar</li>
            <li data-filter=".filter-branding">Oyoq kiyimlar</li>
          </ul><!-- End portfolio Filters -->

          <div class="row gy-4 isotope-container" data-aos="fade-up" data-aos-delay="200">
            {% for product in paint_products %}
            <div class="col-lg-4 col-md-6 portfolio-item isotope-item filter-app">
              <img src="{{ product.image.url }}" class="img-fluid" alt="{{ product.name }}">
              <div class="portfolio-info">
                <h4>{{ product.name }}</h4>
                <h6>{{ product.price|floatformat:0|intcomma }} so'm</h6>
                <p>{{ product.description|linebreaks }}</p>
                <a href="{% url 'products:order_universal' 'paint' product.id %}" class="details-link btn btn-get-started">Xarid qilish</a>
              </div>
            </div><!-- End portfolio Item -->
            {% empty %}
            <div class="col-12"><div class="alert alert-info">Bo'yoqlar topilmadi.</div></div>
            {% endfor %}


            {% for product in furniture_products %}
            <div class="col-lg-4 col-md-6 portfolio-item isotope-item filter-product">
              <img src="{{ product.image.url }}" class="img-fluid" alt="{{ product.name }}">
              <div class="portfolio-info">
                <h4>{{ product.name }}</h4>
                <h6>{{ product.price|floatformat:0|intcomma }} so'm</h6>
                <p>{{ product.description|linebreaks }}</p>
                <a href="{% url 'products:order_universal' 'furniture' product.id %}" class="details-link btn btn-get-started">Xarid qilish</a>
              </div>
            </div><!-- End portfolio Item -->
            {% empty %}
            <div class="col-12"><div class="alert alert-info">Mebellar topilmadi.</div></div>
            {% endfor %}



            {% for product in footwear_products %}
            <div class="col-lg-4 col-md-6 portfolio-item isotope-item filter-branding">
              <img src="{{ product.image.url }}" class="img-fluid" alt="{{ product.name }}">
              <div class="portfolio-info">
                <h4>{{ product.name }}</h4>
                <h6>{{ product.price|floatformat:0|intcomma }} so'm</h6>
                <p>{{ product.description|linebreaks }}</p>
                <a href="{% url 'products:order_universal' 'footwear' product.id %}" class="details-link btn btn-get-started">Xarid qilish</a>
              </div>
            </div><!-- End portfolio Item -->
            {% empty %}
            <div class="col-12"><div class="alert alert-info">Oyoq kiyimlar topilmadi.</div></div>
            {% endfor %}

          </div><!-- End portfolio Container -->

        </div>

      </div>

    </section><!-- /portfolio Section -->


{% endblock %}
